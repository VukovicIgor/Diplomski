using Diplomski.cls;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Diplomski.frm.pitanja
{
    public partial class frmMigracije : Form
    {
        BazaDiplomskog bd = new BazaDiplomskog();
        BazaDiplomskogTableAdapters.NASELJETableAdapter naseljeAdapter = new BazaDiplomskogTableAdapters.NASELJETableAdapter();
        BazaDiplomskogTableAdapters.OPSTINATableAdapter opstinaAdapter = new BazaDiplomskogTableAdapters.OPSTINATableAdapter();
        BazaDiplomskogTableAdapters.DRZAVETableAdapter drzaveAdapter = new BazaDiplomskogTableAdapters.DRZAVETableAdapter();
        BazaDiplomskogTableAdapters.tmp_MIGRACIJETableAdapter tmp_migracijeAdapter = new BazaDiplomskogTableAdapters.tmp_MIGRACIJETableAdapter();
        BazaDiplomskogTableAdapters.NSTJ2TableAdapter nstj2Adapter = new BazaDiplomskogTableAdapters.NSTJ2TableAdapter();
        BazaDiplomskogTableAdapters.UPRAVNI_OKRUGTableAdapter upravniOkrugAdapter = new BazaDiplomskogTableAdapters.UPRAVNI_OKRUGTableAdapter();
        BazaDiplomskogTableAdapters.QueriesTableAdapter brisanje = new BazaDiplomskogTableAdapters.QueriesTableAdapter();

        int id;
        int id_popisivaca;
        public frmMigracije(int id, int id_popisivaca)
        {
            InitializeComponent();
            brisanje.brisanje_tmp_migracije(id_popisivaca);
            naseljeAdapter.Fill(bd.NASELJE);
            opstinaAdapter.Fill(bd.OPSTINA);
            drzaveAdapter.Fill(bd.DRZAVE);
            tmp_migracijeAdapter.Fill(bd.tmp_MIGRACIJE);
            nstj2Adapter.Fill(bd.NSTJ2);
            upravniOkrugAdapter.Fill(bd.UPRAVNI_OKRUG);

            MessageBoxManager.Yes = "Da";
            MessageBoxManager.No = "Ne";
            MessageBoxManager.Register();
            this.id = id;
            this.id_popisivaca = id_popisivaca;
            
            foreach (Control c in Controls)
            {
                if (c is DateTimePicker)
                {
                    DateTimePicker dtp = (DateTimePicker)c;
                    dtp.MaxDate = DateTime.Today;
                    dtp.MinDate = new DateTime(1900, 1, 1);
                    dtp7_2do.MaxDate = DateTime.Today.AddDays(-1);
                    dtp7_2od.MaxDate = dtp7_2do.Value.AddYears(-1);

                    dtp.CustomFormat = " ";
                    dtp.Format = DateTimePickerFormat.Custom;
                    dtp.Enabled = false;
                }
            }
            foreach (Control c in Controls)
            {
                if (c is ComboBox)
                {
                    ComboBox cmb = (ComboBox)c;
                    c.Enabled = false;
                }
            }
            dtp6_2.MinDate = new DateTime(1999, 03, 24);
        }
        private void cb3Srbija_CheckedChanged(object sender, EventArgs e)
        {
            if (cb3Srbija.Checked)
            {
                cmb3Opstina.Enabled = true;
            }
            else
            {
                cmb3Opstina.SelectedIndex = -1;
                cmb3Opstina.Enabled = false;
                cmb3Naselje.SelectedIndex = -1;
                cmb3Naselje.Enabled = false;
            }
        }
        private void cb3Drzava_CheckedChanged(object sender, EventArgs e)
        {
            if (cb3Drzava.Checked)
            {
                cb3Srbija.Checked = false;
                Ucitavanje_drzava(cmb3Drzava);
            }
            else
            {
                //cmb3Drzava.Text = " ";
                cmb3Drzava.SelectedIndex = -1;
                cmb3Drzava.Enabled = false;
            }
        }
        private void cmb3Opstina_SelectedIndexChanged(object sender, EventArgs e)
        {
            Ucitavanje_naselja(cmb3Opstina, cmb3Naselje);
        }
        private void cb4Srbija_CheckedChanged(object sender, EventArgs e)
        {
            if (cb4Srbija.Checked)
            {
                cb4Drzava.Checked = false;
                Ucitavanje_opstina(cmb4Opstina);
            }
            else
            {
                //cmb4Opstina.Text = " ";
                cmb4Opstina.SelectedIndex = -1;
                cmb4Opstina.Enabled = false;
                //cmb4Naselje.Text = " ";
                cmb4Naselje.SelectedIndex = -1;
                cmb4Naselje.Enabled = false;
            }
        }
        private void cmb4Opstina_SelectedIndexChanged(object sender, EventArgs e)
        {
            Ucitavanje_naselja(cmb4Opstina, cmb4Naselje);
        }
        private void cb4Drzava_CheckedChanged(object sender, EventArgs e)
        {
            if (cb4Drzava.Checked)
            {
                cb4Srbija.Checked = false;
                Ucitavanje_drzava(cmb4Drzava);
            }
            else
            {
                //cmb4Drzava.Text = "";
                cmb4Drzava.SelectedIndex = -1;
                cmb4Drzava.Enabled = false;
            }
        }
        private void cb5Da_CheckedChanged(object sender, EventArgs e)
        {
            if (cb5Da.Checked)
            {
                cb5Ne.Checked = false;
                foreach (Control c in Controls)
                {
                    if ((c.Name.Contains("5_") || c.Name.Contains("6")) && c is CheckBox)
                    {
                        CheckBox cb = (CheckBox)c;
                        cb.Checked = false;
                    }       
                }
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("5_") || c.Name.Contains("6"))
                    {
                        c.Enabled = false;
                        if (c is CheckedListBox)
                        {
                            CheckedListBox clb = (CheckedListBox)c;
                            for (int i = 0; i < clb.Items.Count; i++)
                            {
                                clb.SetItemCheckState(i, CheckState.Unchecked);
                            }
                        }
                        if (c is ComboBox)
                        {
                            ComboBox cmb = (ComboBox)c;
                            //cmb.Text = "";
                            cmb.SelectedIndex = -1;
                        }
                    }

                }
            }
            else
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("5_") || c.Name.Contains("6"))
                    {
                        c.Enabled = true;
                        if (c is ComboBox)
                        {
                            ComboBox cmb = (ComboBox)c;
                            cmb.Enabled = false;
                        }
                        if (c is DateTimePicker)
                        {
                            DateTimePicker dtp = (DateTimePicker)c;
                            dtp.Enabled = false;
                        }
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                    }
                }
            }
        }
        private void cb5Ne_CheckedChanged(object sender, EventArgs e)
        {
            if (cb5Ne.Checked)
            {
                cb5Da.Checked = false;
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("5_") || c.Name.Contains("6"))
                    {
                        c.Enabled = true;
                    }
                }
            }
            else
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("5_") || c.Name.Contains("6"))
                    {
                        if (c is ComboBox)
                        {
                            ComboBox cmb = (ComboBox)c;
                            cmb.Enabled = false;
                        }
                        if (c is DateTimePicker)
                        {
                            DateTimePicker dtp = (DateTimePicker)c;
                            dtp.Enabled = false;
                        }
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                    }
                }
            }
        }
        private void cb5_1Srbija_CheckedChanged(object sender, EventArgs e)
        {
            if (cb5_1Srbija.Checked)
            {
                cb5_1Ne.Checked = false;
                cb5_1Drzava.Checked = false;
                Ucitavanje_opstina(cmb5_1Opstina);
            }
            else
            {
                cmb5_1Opstina.Enabled = false;
                cmb5_1Naselje.Enabled = false;
                //cmb5_1Opstina.Text = "";
                //cmb5_1Naselje.Text = "";
                cmb5_1Opstina.SelectedIndex = -1;
                cmb5_1Naselje.SelectedIndex = -1;
            }
        }
        private void cmb5_1Opstina_SelectedIndexChanged(object sender, EventArgs e)
        {
            Ucitavanje_naselja(cmb5_1Opstina, cmb5_1Naselje);
        }
        private void cb5_1Drzava_CheckedChanged(object sender, EventArgs e)
        {
            if (cb5_1Drzava.Checked)
            {
                cb5_1Ne.Checked = false;
                cb5_1Srbija.Checked = false;
                cmb5_1Opstina.Enabled = false;
                cmb5_1Naselje.Enabled = false;
                Ucitavanje_drzava(cmb5_1Drzava);
            }
            else
            {
                //cmb5_1Drzava.Text = "";
                cmb5_1Drzava.SelectedIndex = -1;
                cmb5_1Drzava.Enabled = false;
            }
        }
        private void cb5_1Ne_CheckedChanged(object sender, EventArgs e)
        {
            if (cb5_1Ne.Checked && cb5Ne.Checked)
            {
                foreach (Control c in Controls)
                {
                    if ((c.Name.Contains("5_") && c.Name != ("cb5_1Ne")) || c.Name.Contains("6"))
                    {
                        c.Enabled = false;
                        if (c is CheckedListBox)
                        {
                            CheckedListBox clb = (CheckedListBox)c;
                            for (int i = 0; i < clb.Items.Count; i++)
                            {
                                clb.SetItemCheckState(i, CheckState.Unchecked);
                            }
                        }
                        if (c is ComboBox)
                        {
                            ComboBox cmb = (ComboBox)c;
                            //cmb.Text = "";
                            cmb.SelectedIndex = -1;
                        }
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                    }
                }
            }
            else
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("5_") || c.Name.Contains("6"))
                    {
                        c.Enabled = true;
                    }
                }
            }
        }
        private void clb5_3_ItemCheck(object sender, ItemCheckEventArgs e)
        {
            for (int i = 0; i < clb5_3.Items.Count; ++i)
                if (i != e.Index) clb5_3.SetItemChecked(i, false);
        }
        private void dtp5_2_ValueChanged(object sender, EventArgs e)
        {
            
        }
        private void cb6Da_CheckedChanged(object sender, EventArgs e)
        {
            Ucitavanje_opstina(cmb6_1Opstina);
            if (cb6Da.Checked)
            {
                cb6Ne.Checked = false;
            }
            if (cb6Da.Checked)
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("6_") && c.Name != ("cb6Ne"))
                    {
                        c.Enabled = true;
                    }
                }
            }
            else
            {
                //cmb6_1Opstina.Text = "";
                cmb6_1Opstina.SelectedIndex = -1;
                cmb6_1Opstina.Enabled = false;
                //cmb6_1Naselje.Text = "";
                cmb6_1Naselje.SelectedIndex = -1;
                cmb6_1Naselje.Enabled = false;
                dtp6_2.CustomFormat = " ";
                dtp6_2.Format = DateTimePickerFormat.Custom;
                dtp6_2.Enabled = false;
            }

        }
        private void cmb6_1Opstina_SelectedIndexChanged(object sender, EventArgs e)
        {
            if(cb6Da.Checked)
            {
                Ucitavanje_naselja(cmb6_1Opstina, cmb6_1Naselje);
            }
        }
        private void cb6Ne_CheckedChanged(object sender, EventArgs e)
        {
            if (cb6Ne.Checked)
            {
                dtp6_2.CustomFormat = " ";
                dtp6_2.Format = DateTimePickerFormat.Custom;
                dtp6_2.Enabled = false;
                cb6Da.Checked = false;
                //cmb6_1Opstina.Text = "";
                cmb6_1Opstina.SelectedIndex = -1;
                foreach (Control c in Controls)
                {
                    if ((c.Name.Contains("6_") && c.Name != ("cb6Ne")))
                    {
                        if (c is ComboBox)
                        {
                            ComboBox cmb = (ComboBox)c;
                            cmb.Enabled = false;
                        }
                    }
                }
            }
        }
        private void dtp6_2_ValueChanged(object sender, EventArgs e)
        {
            dtp6_2.Format = DateTimePickerFormat.Short;
        }
        private void cb7Da_CheckedChanged(object sender, EventArgs e)
        {
            if (cb7Da.Checked)
            {
                cb7Ne.Checked = false;
                cb7Inostranstvo.Checked = false;
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("7_"))
                    {
                        c.Enabled = true;
                    }
                }
                Ucitavanje_drzava(cmb7_1Drzava);
            }
            else
            {
                //cmb7_1Drzava.Text = "";
                cmb7_1Drzava.SelectedIndex = -1;
                cmb7_1Drzava.Enabled = false;
                dtp7_2do.CustomFormat = " ";
                dtp7_2do.Format = DateTimePickerFormat.Custom;
                dtp7_2do.Enabled = false;
                dtp7_2od.CustomFormat = " ";
                dtp7_2od.Format = DateTimePickerFormat.Custom;
                dtp7_2od.Enabled = false;
            }
        }
        private void cb7Ne_CheckedChanged(object sender, EventArgs e)
        {
            if(cb7Ne.Checked)
            {
                cb7Da.Checked = false;
                cb7Inostranstvo.Checked = false;
                foreach(Control c in Controls)
                {
                    if (c.Name.Contains("7_"))
                    {
                        c.Enabled = false;
                        if (c is CheckedListBox)
                        {
                            CheckedListBox clb = (CheckedListBox)c;
                            for (int i = 0; i < clb.Items.Count; i++)
                            {
                                clb.SetItemCheckState(i, CheckState.Unchecked);
                            }
                        }
                    }
                }
            }
        }
        private void cb7Inostranstvo_CheckedChanged(object sender, EventArgs e)
        {
            if(cb7Inostranstvo.Checked)
            {
                cb7Da.Checked = false;
                cb7Ne.Checked=false;
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("7_"))
                    {
                        c.Enabled = false;
                        if (c is CheckedListBox)
                        {
                            CheckedListBox clb = (CheckedListBox)c;
                            for (int i = 0; i < clb.Items.Count; i++)
                            {
                                clb.SetItemCheckState(i, CheckState.Unchecked);
                            }
                        }
                    }
                }
            }
        }
        private void dtp7_2od_ValueChanged(object sender, EventArgs e)
        {
            
            dtp7_2do.MinDate = dtp7_2od.Value.AddYears(+1);

        }
        private void dtp7_2do_ValueChanged(object sender, EventArgs e)
        {
            
        }
        private void clb7_3_ItemCheck(object sender, ItemCheckEventArgs e)
        {
            for (int i = 0; i < clb7_3.Items.Count; ++i)
                if (i != e.Index) clb7_3.SetItemChecked(i, false);
        }
        private void cb8RS_CheckedChanged(object sender, EventArgs e)
        {
            if(cb8RS.Checked)
            {
                foreach(Control c in Controls)
                {
                    if ( c.Name.Contains("8") && !c.Name.Contains("cb8RS"))
                    {
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                        cmb8Drzava.Enabled = false;
                        //cmb8Drzava.Text = "";
                        cmb8Drzava.SelectedIndex = -1;
                    }
                }
            }
        }
        private void cb8RSiDrugo_CheckedChanged(object sender, EventArgs e)
        {
            if (cb8SrpskoiDrugo.Checked)
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("8") && !c.Name.Contains("cb8SrpskoiDrugo"))
                    {
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                    }
                }
                Ucitavanje_drzava(cmb8Drzava);
            }
        }
        private void cb8Drugo_CheckedChanged(object sender, EventArgs e)
        {
            if (cb8Drugo.Checked)
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("8") && !c.Name.Contains("cb8Drugo"))
                    {
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                    }
                }
                Ucitavanje_drzava(cmb8Drzava);
            }
        }
        private void cb8Bez_CheckedChanged(object sender, EventArgs e)
        {
            if (cb8Bez.Checked)
            {
                foreach (Control c in Controls)
                {
                    if (c.Name.Contains("8") && !c.Name.Contains("cb8Bez"))
                    {
                        if (c is CheckBox)
                        {
                            CheckBox cb = (CheckBox)c;
                            cb.Checked = false;
                        }
                    }
                }
                cmb8Drzava.Enabled = false;
                //cmb8Drzava.Text = "";
                cmb8Drzava.SelectedIndex = -1;
            }
        }
        private void Ucitavanje_opstina(ComboBox opstina)
        {
            opstina.Enabled = true;
            if (opstina.Name.Contains("6_1"))
            {
                var opstine = (from o in bd.OPSTINA
                               where (from uo in bd.UPRAVNI_OKRUG
                                      where uo.sifra_nstj2.Equals((from ns in bd.NSTJ2
                                                                   where ns.id_nstj2 == 4
                                                                   select ns.sifra_oblasti).FirstOrDefault())
                                      select uo.sifra_okruga).Contains(o.sifra_okruga)
                               select o);

                opstina.DataSource = opstine.CopyToDataTable();
                opstina.DisplayMember = "naziv";
            }
            else
            {
                opstina.DataSource = bd.OPSTINA.CopyToDataTable();
                opstina.DisplayMember = "naziv";
                var sifra_opstine = (from o in bd.OPSTINA
                                     where o.naziv.Contains(opstina.Text)
                                     select o.sifra_opstine).FirstOrDefault();
            }

        }
        private void Ucitavanje_naselja(ComboBox opstina, ComboBox naselje)
        {
            naselje.Enabled = true; 
            var sifra_opstine = (from o in bd.OPSTINA
                                 where o.naziv.Contains(opstina.Text)
                                 select o.sifra_opstine).FirstOrDefault();

            var naselja = (from n in bd.NASELJE
                           where n.sifra_opstine == sifra_opstine
                           select n);

            if (naselja.Any())
            {
                naselje.DataSource = naselja.CopyToDataTable();
                naselje.DisplayMember = "naziv";
            }
        }
        private void Ucitavanje_drzava(ComboBox drzava)
        {
            drzava.Enabled = true;
            drzava.DataSource = bd.DRZAVE.CopyToDataTable();
            drzava.DisplayMember = "naziv";
        }
        private void btnDalje_Click(object sender, EventArgs e)
        {
            if (!cb3Drzava.Checked && !cb3Srbija.Checked) { MessageBox.Show("Nedostaje odgovor za pitanje 3!!!"); }
            else if (!cb4Drzava.Checked && !cb4Srbija.Checked) { MessageBox.Show("Nedostaje odgovor za pitanje 4!!!"); }
            else if (!cb5Da.Checked && !cb5Ne.Checked) { MessageBox.Show("Nedostaje odgovor za pitanje 5!!!"); }
            else if (cb5Ne.Checked && !cb5_1Srbija.Checked && !cb5_1Drzava.Checked && !cb5_1Ne.Checked)
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 5.1!!!");
            }
            else if (cb5Ne.Checked && !cb5_1Ne.Checked && dtp5_2.Text == " ")
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 5.2!!!");
            }
            else if (cb5Ne.Checked && !cb5_1Ne.Checked && clb5_3.CheckedItems.Count == 0)
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 5.3!!!");
            }
            else if (!cb5Da.Checked && !cb5_1Ne.Checked && !cb6Da.Checked && !cb6Ne.Checked)
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 6!!!");
            }
            else if (!cb5Da.Checked && !cb5_1Ne.Checked && cb6Da.Checked && dtp6_2.Text == " ")
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 6.2!!!");
            }
            else if ((cb5Da.Checked || cb5_1Ne.Checked || cb6Ne.Checked) && (!cb7Da.Checked && !cb7Inostranstvo.Checked && !cb7Ne.Checked))
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 7!!!");
            }
            else if (cb7Da.Checked && (dtp7_2od.Text == " " || dtp7_2do.Text == " "))
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 7.2!!!");
            }
            else if (cb7Da.Checked && clb7_3.CheckedItems.Count == 0)
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 7.3!!!");
            }
            else if (!cb8Bez.Checked && !cb8Drugo.Checked && cb8RS.Checked && cb8SrpskoiDrugo.Checked)
            {
                MessageBox.Show("Nedostaje odgovor za pitanje 8!!!");
            }
            else
            {
                DialogResult pitanje = MessageBox.Show("Da li ste sigurni?", "Unos", MessageBoxButtons.YesNo);
                if (pitanje==DialogResult.Yes)
                {
                    BazaDiplomskog.tmp_MIGRACIJERow red = bd.tmp_MIGRACIJE.Newtmp_MIGRACIJERow();
                    red.id_osobe = id;
                    red.id_popisivac = id_popisivaca;
                    if (cb3Srbija.Checked)
                    {
                        red.pitanje3_mesto = cmb3Opstina.Text;
                        red.pitanje3_naselje = cmb3Naselje.Text;
                    }
                    else { red.pitanje3_drzava = cmb3Drzava.Text; }
                    if (cb4Srbija.Checked) { red.pitanje4 = cmb4Opstina.Text + "/" + cmb4Naselje.Text; }
                    else { red.pitanje4 = cmb4Drzava.Text; }
                    if (cb5Da.Checked)
                    {
                        red.pitanje5 = "Da";
                        red.pitanje5_1 = null;
                        red.pitanje5_2 = null;
                        red.pitanje5_3 = null;
                        red.pitanje6 = null;
                        red.pitanje6_1 = null;
                        red.pitanje6_2 = null;
                    }
                    else if (cb5Ne.Checked)
                    {
                        red.pitanje5 = "Ne";
                        if (cb5_1Ne.Checked)
                        {
                            red.pitanje5_1 = "Ne";
                            red.pitanje5_2 = null;
                            red.pitanje5_3 = null;
                            red.pitanje6 = null;
                            red.pitanje6_1 = null;
                            red.pitanje6_2 = null;
                        }
                        else
                        {
                            if (cb5_1Srbija.Checked) { red.pitanje5_1 = cmb5_1Opstina.Text + "/" + cmb5_1Naselje.Text; }
                            else { red.pitanje5_1 = cmb5_1Drzava.Text; }
                            red.pitanje5_2 = dtp5_2.Text;
                            red.pitanje5_3 = clb5_3.Text;
                            if(cb6Da.Checked)
                            {
                                red.pitanje6 = "Da";
                                red.pitanje6_1 = cmb6_1Opstina.Text+"/"+cmb6_1Naselje.Text;
                                red.pitanje6_2 = dtp6_2.Text;
                            }
                        }
                    }
                    if (cb7Da.Checked)
                    {
                        red.pitanje7 = "Da";
                        red.pitanje7_1 = cmb7_1Drzava.Text;
                        red.pitanje7_2 = dtp7_2od.Text + "-" + dtp7_2do.Text;
                        red.pitanje7_3 = clb7_3.Text;
                    }
                    else if (cb7Ne.Checked) 
                    {
                        red.pitanje7 = "Ne";
                        red.pitanje7_1 = null;
                        red.pitanje7_2 = null;
                        red.pitanje7_3 = null;
                    }
                    else
                    {
                        red.pitanje7 = "Lice je u inostranstvu";
                        red.pitanje7_1 = null;
                        red.pitanje7_2 = null;
                        red.pitanje7_3 = null;
                    }
                    if (cb8RS.Checked) { red.pitanje8 = cb8RS.Text; }
                    else if (cb8SrpskoiDrugo.Checked) { red.pitanje8 = "Republike Srbije/" + cmb8Drzava.Text; }
                    else if (cb8Drugo.Checked) { red.pitanje8 = cmb8Drzava.Text; }
                    else { red.pitanje8 = cb8Bez.Text; }
                    bd.tmp_MIGRACIJE.Addtmp_MIGRACIJERow(red);
                    tmp_migracijeAdapter.Update(bd.tmp_MIGRACIJE);
                    MessageBoxManager.Unregister();
                    frmBracniStatusFertilitet forma = new frmBracniStatusFertilitet(id, id_popisivaca);
                    this.Hide();
                    forma.ShowDialog();
                    this.Close();
                    
                }
            }
        }

        private void cmb3Opstina_EnabledChanged(object sender, EventArgs e)
        {
            if (cb3Srbija.Checked)
            {
                Ucitavanje_opstina(cmb3Opstina);
                cb3Drzava.Checked = false;
            }
            else
            {
                //cmb3Opstina.Text = "";
                cmb3Opstina.SelectedIndex = -1;
                cmb3Opstina.Enabled = false;
                cmb3Naselje.Text = "";
                cmb3Naselje.SelectedIndex = -1;
                cmb3Naselje.Enabled = false;
            }
        }

        private void dtp7_2od_EnabledChanged(object sender, EventArgs e)
        {
            if(dtp7_2od.Enabled)
                dtp7_2od.Format = DateTimePickerFormat.Short;
            else
            {
                dtp7_2od.CustomFormat = " ";
                dtp7_2od.Format = DateTimePickerFormat.Custom;
            }
        }

        private void dtp7_2do_EnabledChanged(object sender, EventArgs e)
        {
            if (dtp7_2do.Enabled)
                dtp7_2do.Format = DateTimePickerFormat.Short;
            else
            {
                dtp7_2do.CustomFormat = " ";
                dtp7_2do.Format = DateTimePickerFormat.Custom;
            }
        }

        private void dtp5_2_EnabledChanged(object sender, EventArgs e)
        {
            if(dtp5_2.Enabled)
                dtp5_2.Format = DateTimePickerFormat.Short;
            else
            {
                dtp5_2.CustomFormat = " ";
                dtp5_2.Format = DateTimePickerFormat.Custom;
            }
        }

        private void svaPitanjaToolStripMenuItem_Click(object sender, EventArgs e)
        {
            frmPitanja frm = new frmPitanja();
            frm.ShowDialog();
        }

        private void početnaToolStripMenuItem_Click(object sender, EventArgs e)
        {
            DialogResult result = MessageBox.Show("Da li želite da se vratite na početnu stranu?", "Unos", MessageBoxButtons.YesNo);
            if (result == DialogResult.Yes)
            {
                MessageBoxManager.Unregister();
                frmPocetna frm = new frmPocetna(id_popisivaca);
                this.Hide();
                frm.ShowDialog();
                this.Close();
            }
        }
    }
}
